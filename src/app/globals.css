@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

/*
 * reveal.js viewport and container: override Tailwind's body background/color cascade.
 * The theme sets --r-background-color and --r-main-color on :root, but body's
 * background: var(--background) and color: var(--foreground) from Tailwind cascade
 * through and win. We force the reveal.js custom properties here.
 */
.reveal-viewport {
  background-color: var(--r-background-color, #191919) !important;
  color: var(--r-main-color, #fff) !important;
}

.reveal {
  color: var(--r-main-color, #fff) !important;
  font-family: var(--r-main-font, "Source Sans Pro", Helvetica, sans-serif) !important;
}

/*
 * Undo ONLY the specific Tailwind v4 base resets that conflict with reveal.js.
 * Tailwind v4 resets margin, padding, list-style, font, border, and text-decoration
 * via low-specificity selectors (element tags or *). The reveal.js theme CSS at
 * .reveal specificity (0,1,x) already beats Tailwind's element resets (0,0,x) for
 * most properties. We only need overrides for cases where Tailwind's reset would
 * otherwise be the ONLY rule (no theme override exists).
 *
 * IMPORTANT: Do NOT use font-size/font-weight/margin revert on headings —
 * the theme's .reveal h1 rules already beat Tailwind's h1 { font-size: inherit }.
 * Using revert at .reveal .slides h1 specificity (0,2,1) would override the theme
 * with UA defaults instead of the theme's custom property values.
 */

/* Lists: Tailwind resets list-style via ol,ul { list-style: none } at (0,0,1).
   Theme sets .reveal ul { list-style-type: disc } at (0,1,1) which already wins.
   But keep revert for safety in case of CSS load order issues. */
.reveal .slides ul,
.reveal .slides ol {
  list-style: revert;
  padding: revert;
  margin: revert;
}

.reveal .slides li {
  margin: revert;
}

/* Blockquote: ensure Tailwind * { margin:0 } doesn't strip theme blockquote margin */
.reveal .slides blockquote {
  margin: revert;
}

/* Table elements: Tailwind resets border via * { border: 0 solid } at (0,0,0).
   Theme sets table border-bottom etc at higher specificity, but keep for completeness. */
.reveal .slides table {
  border-collapse: revert;
  border-spacing: revert;
  margin: revert;
}

.reveal .slides thead,
.reveal .slides tbody,
.reveal .slides tr {
  border: revert;
}

.reveal .slides th,
.reveal .slides td {
  border: revert;
  padding: revert;
  text-align: revert;
}

/* Pre/Code: Tailwind sets code,pre { font-family: tailwind-mono; font-size: 1em }
   at (0,0,1). We must NOT use font-size:revert — it reverts to UA inherit which
   picks up .reveal's 42px base. Instead let theme's .reveal pre (0,1,1) handle
   font-size (0.55em). We only revert font-family, margin, and add explicit
   background/padding/border-radius so code blocks render like the reveal.js demo. */
.reveal .slides pre {
  font-family: revert;
  margin: revert;
  background: #3f3f3f;
  padding: 20px;
  border-radius: 8px;
  overflow: auto;
  box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.15);
}

.reveal .slides code {
  font-family: revert;
}

/* Links: Tailwind resets a { color: inherit; text-decoration: inherit } at (0,0,1).
   Theme .reveal a at (0,1,1) wins, but keep for safety. */
.reveal .slides a {
  color: revert;
  text-decoration: revert;
}

/* Images: Tailwind resets max-width and display */
.reveal .slides img {
  max-width: revert;
  display: revert;
  margin: revert;
}

/* Inline elements: Tailwind resets font-style/font-weight */
.reveal .slides strong,
.reveal .slides b {
  font-weight: revert;
}

.reveal .slides em,
.reveal .slides i {
  font-style: revert;
}

.reveal .slides small {
  font-size: revert;
}

.reveal .slides sub,
.reveal .slides sup {
  font-size: revert;
  vertical-align: revert;
}

/* Definition lists: Tailwind resets margin */
.reveal .slides dl,
.reveal .slides dt,
.reveal .slides dd {
  margin: revert;
}

/* Figures: Tailwind resets margin */
.reveal .slides figure,
.reveal .slides figcaption {
  margin: revert;
}

/*
 * Fragment animations: reveal.js manages fragment opacity/transform/visibility
 * itself. Do NOT revert these — reveal.js sets fragments to opacity:0 initially
 * and animates them in. Reverting would set opacity to 1 (visible), breaking
 * the animation. Only revert transition timing if needed.
 */

/*
 * Fragment visibility in embedded editor mode:
 * reveal.js starts fragments at opacity:0/visibility:hidden — correct for
 * presentation mode but makes slide content look empty in the editor.
 * Show all fragments in embedded mode so users can see all content.
 * Fragments still animate correctly in fullscreen presentation mode.
 */
.reveal.embedded .slides .fragment:not(.visible) {
  opacity: 1;
  visibility: inherit;
}

/*
 * Navigation controls: reveal.js defaults to black controls which are
 * invisible on dark themes. Use the theme's link color for visibility.
 */
.reveal .controls {
  color: var(--r-link-color, #42affa) !important;
}

/*
 * Progress bar: ensure it uses the theme's link color for consistency.
 */
.reveal .progress {
  color: var(--r-link-color, #42affa);
}

/* Cap h1 size to prevent multi-word titles from overwhelming the slide.
   The black theme sets --r-heading1-size: 2.5em which at 42px base = 105px.
   That's fine for short titles but breaks with 3+ word titles.
   min() caps it at 2em (84px at 42px base) — proportional like the revealjs.com demo. */
.reveal .slides section h1 {
  font-size: min(var(--r-heading1-size, 2.5em), 2em);
}

/* Ensure overview mode pointer events are not blocked */
.reveal.overview .slides section {
  cursor: pointer;
}
